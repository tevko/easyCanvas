!function(t){"use strict";var e=t.easyCanvas=t.easyCanvas||{};e.create=function(e,s){var n=document.querySelector(e),r=n.getContext(s);return{canvas:n,context:r,width:t.getComputedStyle(n).getPropertyValue("width"),height:t.getComputedStyle(n).getPropertyValue("height"),bg:t.getComputedStyle(n).getPropertyValue("background-color"),shapesCount:0,isDrawable:!1,currentEventListenerCount:0,imgCount:0,setHeight:function(t){return this.height=t,n.style.height=t,this},setWidth:function(t){return this.width=t,n.style.width=t,this},setBG:function(t){return this.bg=t,n.style.backgroundColor=t,this},rectangle:function(t,e,s,n){return r.fillStyle=e,r.lineWidth=s,r.strokeStyle=n,r.fillRect.apply(r,t),r.strokeRect.apply(r,t),this.currentShapes=this.currentShapes||{},this.currentShapes[this.shapesCount]={cords:t,fill:e,lineWidth:s,strokeStyle:n},this.shapesCount+=1,this},circle:function(t,e,s,n,i,h){return r.beginPath(),r.arc(t,e,s,0,2*Math.PI,!0),r.fillStyle=n,r.fill(),r.lineWidth=i,r.strokeStyle=h,r.stroke(),this.currentShapes=this.currentShapes||{},this.currentShapes[this.shapesCount]={centerX:t,centerY:e,radius:s,strokeStyle:h,fillStyle:n,lineWidth:i},this.shapesCount+=1,this},makeDrawable:function(t,e,s){this.isDrawable=!0;var i,h=[],u=[],a=[],o=function(t,e,s){h.push(t),u.push(e),a.push(s)},c=function(){r.clearRect(0,0,r.canvas.width,r.canvas.height),r.strokeStyle=t,r.lineJoin=e,r.lineWidth=s;for(var n=0;n<h.length;n++)r.beginPath(),a[n]&&n?r.moveTo(h[n-1],u[n-1]):r.moveTo(h[n]-1,u[n]),r.lineTo(h[n],u[n]),r.closePath(),r.stroke()},l=function(t){i=!0,o(t.clientX-this.offsetLeft,t.clientY-this.offsetTop)},v=function(t){i&&(o(t.clientX-this.offsetLeft,t.clientY-this.offsetTop,!0),c())},d=function(){i=!1};return n.addEventListener("mousedown",l),n.addEventListener("mousemove",v),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",d),this.currentEventListeners=this.currentEventListeners||{},this.currentEventListeners[this.currentEventListenerCount]={mousedown:{name:"msdn",val:l},mousemove:{name:"msm",val:v},mouseup:{name:"pfalse",val:d},mouseleave:{name:"pfalse",val:d}},this.currentEventListenerCount+=1,this},drawImg:function(t,e,s,n,i,h,u,a,o){if("string"==typeof t){var c=new Image;c.src=t}var l=c||t;return r.drawImage(l,e,s,n,i,h,u,a,o),this.currentImgs=this.currentImgs||{},this.currentImgs[this.imgCount]={source:l,srcX:e,srcY:s,srcWidth:n,srcHeight:i,destX:h,destY:u,destWidth:a,destHeight:o},this.imgCount+=1,this},clearCanvas:function(){return r.clearRect(0,0,r.canvas.width,r.canvas.height),this},removeEvtListeners:function(){for(var t in this.currentEventListeners){var e=this.currentEventListeners[t];for(var s in e)n.removeEventListener(s,e[s].val)}return this.currentEventListenerCount=0,this.currentEventListeners=null,this},resetAll:function(){return n.style.backgroundColor="transparent",n.style.width="auto",n.style.height="auto",this.removeEvtListeners(),this.clearCanvas(),this.currentEventListenerCount=0,this.bg="transparent",this.currentShapes=null,this.height="auto",this.width="auto",this.isDrawable=!1,this.shapesCount=0,this.imgCount=0,this.currentImgs=null,this},save:function(){return r.save(),this},restore:function(){return r.restore(),this}}}}(window);