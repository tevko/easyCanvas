!function(t){"use strict";t.easyCanvas=t.easyCanvas||{init:function(e,s){var n=document.querySelector(e),i=n.getContext(s);return this.canvas=n,this.context=i,this.width=t.getComputedStyle(n).getPropertyValue("width"),this.height=t.getComputedStyle(n).getPropertyValue("height"),this.bg=t.getComputedStyle(n).getPropertyValue("background-color"),this.shapesCount=0,this.isDrawable=!1,this.currentEventListenerCount=0,this.imgCount=0,this},setHeight:function(t){return this.height=t,this.canvas.style.height=t,this},setWidth:function(t){return this.width=t,this.canvas.style.width=t,this},setBG:function(t){return this.bg=t,this.canvas.style.backgroundColor=t,this},rectangle:function(t,e,s,n){return this.context.fillStyle=e,this.context.lineWidth=s,this.context.strokeStyle=n,this.context.fillRect.apply(this.context,t),this.context.strokeRect.apply(this.context,t),this.currentShapes=this.currentShapes||{},this.currentShapes[this.shapesCount]={cords:t,fill:e,lineWidth:s,strokeStyle:n},this.shapesCount+=1,this},circle:function(t,e,s,n,i,h){return this.context.beginPath(),this.context.arc(t,e,s,0,2*Math.PI,!0),this.context.fillStyle=n,this.context.fill(),this.context.lineWidth=i,this.context.strokeStyle=h,this.context.stroke(),this.currentShapes=this.currentShapes||{},this.currentShapes[this.shapesCount]={centerX:t,centerY:e,radius:s,strokeStyle:h,fillStyle:n,lineWidth:i},this.shapesCount+=1,this},makeDrawable:function(t,e,s){this.isDrawable=!0;var n,i=[],h=[],r=[],o=function(t,e,s){i.push(t),h.push(e),r.push(s)},c=function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.strokeStyle=t,this.context.lineJoin=e,this.context.lineWidth=s;for(var n=0;n<i.length;n++)this.context.beginPath(),r[n]&&n?this.context.moveTo(i[n-1],h[n-1]):this.context.moveTo(i[n]-1,h[n]),this.context.lineTo(i[n],h[n]),this.context.closePath(),this.context.stroke()},a=function(t){n=!0,o(t.clientX-this.offsetLeft,t.clientY-this.offsetTop)},u=function(t){n&&(o(t.clientX-this.offsetLeft,t.clientY-this.offsetTop,!0),c())},l=function(){n=!1};return this.context.addEventListener("mousedown",a),this.context.addEventListener("mousemove",u),this.context.addEventListener("mouseup",l),this.context.addEventListener("mouseleave",l),this.currentEventListeners=this.currentEventListeners||{},this.currentEventListeners[this.currentEventListenerCount]={mousedown:{name:"msdn",val:a},mousemove:{name:"msm",val:u},mouseup:{name:"pfalse",val:l},mouseleave:{name:"pfalse",val:l}},this.currentEventListenerCount+=1,this},drawImg:function(t,e,s,n,i,h,r,o,c){if("string"==typeof t){var a=new Image;a.src=t}var u=a||t;return this.context.drawImage(u,e,s,n,i,h,r,o,c),this.currentImgs=this.currentImgs||{},this.currentImgs[this.imgCount]={source:u,srcX:e,srcY:s,srcWidth:n,srcHeight:i,destX:h,destY:r,destWidth:o,destHeight:c},this.imgCount+=1,this},clearCanvas:function(){return this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this},removeEvtListeners:function(){for(var t in this.currentEventListeners){var e=this.currentEventListeners[t];for(var s in e)this.context.removeEventListener(s,e[s].val)}return this.currentEventListenerCount=0,this.currentEventListeners=null,this},resetAll:function(){return this.context.style.backgroundColor="transparent",this.context.style.width="auto",this.context.style.height="auto",this.removeEvtListeners(),this.clearCanvas(),this.currentEventListenerCount=0,this.bg="transparent",this.currentShapes=null,this.height="auto",this.width="auto",this.isDrawable=!1,this.shapesCount=0,this.imgCount=0,this.currentImgs=null,this},save:function(){return this.context.save(),this},restore:function(){return this.context.restore(),this}}}(window);